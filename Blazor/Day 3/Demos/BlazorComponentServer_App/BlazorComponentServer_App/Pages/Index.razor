@page "/"
@using RazorComponents_Library
@using RazorComponents_Library.Definitions;

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.


<br />
<br />

<DataGridComponent TItem="Employee"
                   DataItems="listEmployees"
                   Columns="columnsDefinition"
                   Paging="@(new PagingConfig
                             {
                                 Enabled = true,
                                 PageSize = 3
                   })"></DataGridComponent>

@code  {

    private List<Employee>? listEmployees;
    private List<ColumnDefinition>? columnsDefinition;

    protected override void OnInitialized()
    {
        Initilize();

        base.OnInitialized();
    }


    private void Initilize()
    {
        if (columnsDefinition == null)
        {
            columnsDefinition = new List<ColumnDefinition>();
            columnsDefinition.AddRange(
                new ColumnDefinition[] {
                    new ColumnDefinition { DataField = "Name", Caption="Name" },
                    new ColumnDefinition { DataField = "Title", Caption="Title" },
                    new ColumnDefinition { DataField = "Department", Caption="Department" },
                    new ColumnDefinition { DataField = "EmploymentDate", Caption="Employment Date", Format = "yyyy/MM/dd", DataType = DataType.Date },
                    new ColumnDefinition { DataField = "Salary", Caption="Annual Salary", DataType = DataType.Currency, Alignment = Alignment.Right, Format="c", SortDirection = SortDirection.Desc },
                    }
            );
        }

        if (listEmployees == null)
        {
            listEmployees = new List<Employee>();
            listEmployees.AddRange(
                new Employee[]
                {
                    new Employee
                    {
                        Name = "Faye Mehai",
                        Title = "Developer",
                        Department = "Software Dev",
                        EmploymentDate = DateTime.Now,
                        Salary = 100000
                    },
                    new Employee
                    {
                        Name = "Tim Smith",
                        Title = "DBA",
                        Department = "IT",
                        EmploymentDate = DateTime.Now,
                        Salary = 100001
                    }
                    ,
                    new Employee
                    {
                        Name = "John Doe",
                        Title = "QA",
                        Department = "QA",
                        EmploymentDate = DateTime.Now,
                        Salary = 100002
                    }
                    ,
                    new Employee
                    {
                        Name = "Jane Doey",
                        Title = "Developer",
                        Department = "Software Dev",
                        EmploymentDate = DateTime.Now,
                        Salary = 100003
                    }
                    ,
                    new Employee
                    {
                        Name = "Joe Bath",
                        Title = "QA",
                        Department = "QA",
                        EmploymentDate = DateTime.Now,
                        Salary = 100004
                    }
                    ,
                    new Employee
                    {
                        Name = "Eric Anderson",
                        Title = "Developer",
                        Department = "Software Dev",
                        EmploymentDate = DateTime.Now,
                        Salary = 100005
                    }
                    ,
                    new Employee
                    {
                        Name = "Lawrence Ebansa",
                        Title = "DBA",
                        Department = "IT",
                        EmploymentDate = DateTime.Now,
                        Salary = 100006
                    }
                    ,
                    new Employee
                    {
                        Name = "Ken Sánchez",
                        Title = "QA",
                        Department = "QA",
                        EmploymentDate = DateTime.Now,
                        Salary = 100007
                    }
                    ,
                    new Employee
                    {
                        Name = "Rob Walters",
                        Title = "Developer",
                        Department = "Software Dev",
                        EmploymentDate = DateTime.Now,
                        Salary = 100008
                    }
                    ,
                    new Employee
                    {
                        Name = "Gail Erickson",
                        Title = "DBA",
                        Department = "IT",
                        EmploymentDate = DateTime.Now,
                        Salary = 100009
                    }
                }
            );            
        }
    }

    class Employee
    {
        public string Name { get; set; }
        public string Title { get; set; }
        public string Department { get; set; }
        public DateTime EmploymentDate { get; set; }
        public int Salary { get; set; }
    }

}